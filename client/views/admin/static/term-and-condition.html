<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <!-- Meta, title, CSS, favicons, etc. -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{{app.name}}</title>
  <!-- Bootstrap -->
  <link href="{{app.url}}vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link href="{{app.url}}vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <!-- NProgress -->
  <link href="{{app.url}}vendors/nprogress/nprogress.css" rel="stylesheet">
  <!-- iCheck -->
  <link href="{{app.url}}vendors/iCheck/skins/flat/green.css" rel="stylesheet">
  <!-- Datatables -->
  <link href="{{app.url}}vendors/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet">
  <link href="{{app.url}}vendors/datatables.net-buttons-bs/css/buttons.bootstrap.min.css" rel="stylesheet">
  <link href="{{app.url}}vendors/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css"
    rel="stylesheet">
  <link href="{{app.url}}vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css"
    rel="stylesheet">
  <link href="{{app.url}}vendors/datatables.net-scroller-bs/css/scroller.bootstrap.min.css" rel="stylesheet">

  <!-- Custom Theme Style -->
  <link href="{{app.url}}build/css/custom.min.css" rel="stylesheet">
  <style>
    .input {
      width: 100%;
    }
  </style>
</head>

<body class="nav-md">
  <div class="container body">
    <div class="main_container">
      <!-- top navigation -->
      {{ include 'admin/global/header' }}



       {{ include 'admin/global/sidebar' }}






      <!-- page content -->
      <div class="right_col" role="main">
        <div class="">
          <div class="page-title">
            <div class="title_left">

            </div>

            <!-- <div class="title_right">
                <div class="col-md-5 col-sm-5 col-xs-12 form-group pull-right top_search">
                  <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search for...">
                    <span class="input-group-btn">
                      <button class="btn btn-default" type="button">Go!</button>
                    </span>
                  </div>
                </div>
              </div>-->
          </div>

          <div class="clearfix"></div>

          <div class="row">


            <div class="col-md-12 col-sm-12 col-xs-12">
              <div class="x_panel">
                <div class="x_title">
                  <h2>#1 Terms and Condition<small></small></h2>
                  <ul class="nav navbar-right panel_toolbox text-right">
                    <li class="dropdown visible-none">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i
                          class="fa fa-wrench"></i></a>
                      <ul class="dropdown-menu" role="menu">
                        <li><a href="#">Settings 1</a>
                        </li>
                        <li><a href="#">Settings 2</a>
                        </li>
                      </ul>
                    </li>
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                    </li>

                    <li><a class="close-link"><i class="fa fa-close"></i></a>
                    </li>
                  </ul>
                  <div class="clearfix"></div>
                </div>
                <div class="x_content">
                  <form action="{{app.url}}admin/term-and-condition" onsubmit="return updateProduct(this)" method="POST">
                    <div class="row">
                       
                    
                        
                        <div class="col-md-12">
                          <br>
                        <label>Terms and Condition</label>
                       
                            
                  <div class="btn-toolbar editor" data-role="editor-toolbar" data-target="#term">
                    
                    <div class="btn-group">
                      <a class="btn dropdown-toggle" data-toggle="dropdown" title="Font Size"><i class="fa fa-text-height"></i>&nbsp;<b class="caret"></b></a>
                      <ul class="dropdown-menu">
                        <li>
                          <a data-edit="fontSize 5">
                            <p style="font-size:17px">Huge</p>
                          </a>
                        </li>
                        <li>
                          <a data-edit="fontSize 3">
                            <p style="font-size:14px">Normal</p>
                          </a>
                        </li>
                        <li>
                          <a data-edit="fontSize 1">
                            <p style="font-size:11px">Small</p>
                          </a>
                        </li>
                      </ul>
                    </div>

                    <div class="btn-group">
                      <a class="btn" data-edit="bold" title="Bold (Ctrl/Cmd+B)"><i class="fa fa-bold"></i></a>
                      <a class="btn" data-edit="italic" title="Italic (Ctrl/Cmd+I)"><i class="fa fa-italic"></i></a>
                      <a class="btn" data-edit="strikethrough" title="Strikethrough"><i class="fa fa-strikethrough"></i></a>
                      <a class="btn" data-edit="underline" title="Underline (Ctrl/Cmd+U)"><i class="fa fa-underline"></i></a>
                    </div>

                    <div class="btn-group">
                      <a class="btn" data-edit="insertunorderedlist" title="Bullet list"><i class="fa fa-list-ul"></i></a>
                      <a class="btn" data-edit="insertorderedlist" title="Number list"><i class="fa fa-list-ol"></i></a>
                      <a class="btn" data-edit="outdent" title="Reduce indent (Shift+Tab)"><i class="fa fa-dedent"></i></a>
                      <a class="btn" data-edit="indent" title="Indent (Tab)"><i class="fa fa-indent"></i></a>
                    </div>

                    <div class="btn-group">
                      <a class="btn" data-edit="justifyleft" title="Align Left (Ctrl/Cmd+L)"><i class="fa fa-align-left"></i></a>
                      <a class="btn" data-edit="justifycenter" title="Center (Ctrl/Cmd+E)"><i class="fa fa-align-center"></i></a>
                      <a class="btn" data-edit="justifyright" title="Align Right (Ctrl/Cmd+R)"><i class="fa fa-align-right"></i></a>
                      <a class="btn" data-edit="justifyfull" title="Justify (Ctrl/Cmd+J)"><i class="fa fa-align-justify"></i></a>
                    </div>

                  
                   
                    
                  </div>

                  <div id="term" class="editor-wrapper">{{{term.value}}}</div>
                  

                      </div>

                     
                     
                       

                      

                    
                      <div class="col-md-2 text-right">
                        <br>
                        <button type="submit" class="btn btn-success btn-block"><i class="fa fa-save"></i> Save</button>
                      </div>
                    </div>

 
                 
                  </form>
                  



                </div>
              </div>
            </div>

          </div>



          <!--div class="row">


            <div class="col-md-12 col-sm-12 col-xs-12">
              <div class="x_panel">
                <div class="x_title">
                  <h2>#2 Product Image<small></small></h2>
                  <ul class="nav navbar-right panel_toolbox text-right">
                    <li class="dropdown visible-none">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i
                          class="fa fa-wrench"></i></a>
                      <ul class="dropdown-menu" role="menu">
                        <li><a href="#">Settings 1</a>
                        </li>
                        <li><a href="#">Settings 2</a>
                        </li>
                      </ul>
                    </li>
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                    </li>

                    <li><a class="close-link"><i class="fa fa-close"></i></a>
                    </li>
                  </ul>
                  <div class="clearfix"></div>
                </div>
                <div class="x_content">
                   <style type="text/css">
						#preview img{
						   margin: 5px;
						}
						</style>
						<form method='post' action='' enctype="multipart/form-data">
						   <input type="file" id='files' name="files[]" multiple><br>
						   <input type="button" id="submit" value='Upload'>
						</form>

					
						<div id='preview'></div>




                </div>
              </div>
            </div>

          </div--->





        </div>
      </div>
      <!-- /page content -->

      <!-- footer content -->
      {{ include 'admin/global/footer' }}


      <!-- /footer content -->
    </div>
  </div>

  <!-- jQuery -->
  <script src="{{app.url}}vendors/jquery/dist/jquery.min.js"></script>
  <!-- Bootstrap -->
  <script src="{{app.url}}vendors/bootstrap/dist/js/bootstrap.min.js"></script>
  <!-- FastClick -->
  <script src="{{app.url}}vendors/fastclick/lib/fastclick.js"></script>
  <!-- NProgress -->
  <script src="{{app.url}}vendors/nprogress/nprogress.js"></script>
  <!-- iCheck -->
  <script src="{{app.url}}vendors/iCheck/icheck.min.js"></script>
  <!-- Datatables -->
  <script src="{{app.url}}vendors/datatables.net/js/jquery.dataTables.min.js"></script>
  <script src="{{app.url}}vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
  <script src="{{app.url}}vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
  <script src="{{app.url}}vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
  <script src="{{app.url}}vendors/datatables.net-buttons/js/buttons.flash.min.js"></script>
  <script src="{{app.url}}vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
  <script src="{{app.url}}vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
  <script src="{{app.url}}vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
  <script src="{{app.url}}vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
  <script src="{{app.url}}vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
  <script src="{{app.url}}vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
  <script src="{{app.url}}vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>
  <script src="{{app.url}}vendors/jszip/dist/jszip.min.js"></script>
  <script src="{{app.url}}vendors/pdfmake/build/pdfmake.min.js"></script>
  <script src="{{app.url}}vendors/pdfmake/build/vfs_fonts.js"></script>


 <script src="{{app.url}}vendors/bootstrap-wysiwyg/js/bootstrap-wysiwyg.min.js"></script>
    <script src="{{app.url}}vendors/jquery.hotkeys/jquery.hotkeys.js"></script>
    <script src="{{app.url}}vendors/google-code-prettify/src/prettify.js"></script>
  <!-- Custom Theme Scripts -->
  <script src="{{app.url}}build/js/custom.min.js"></script>
   <script type="text/javascript">      		

							       	$(document).ready(function(){

							$('#submit').click(function(){

							   var form_data = new FormData();

							   // Read selected files
							   var totalfiles = document.getElementById('files').files.length;
							   for (var index = 0; index < totalfiles; index++) {
							      form_data.append("files[]", document.getElementById('files').files[index]);
							   }

							   // AJAX request
							   $.ajax({
							     url: '{{app.url}}admin/product-update-images', 
							     type: 'post',
							     data: form_data,
							     dataType: 'json',
							     contentType: false,
							     processData: false,
							     success: function (response) {
							     		alert(JSON.stringify(response))
							       for(var index = 0; index < response.length; index++) {
							         var src = response[index];

							         // Add img element in <div id='preview'>
							         $('#preview').append('<img src="'+src+'" width="200px;" height="200px">');
							       }

							     }
							   });

							});

							});
							        </script>   

  <script>


    function updateProduct(t){
      var formData = new FormData(t);
      formData.append('term',$('#term').html());
      $.ajax({
        type: 'POST',
        url: $(t).attr('action'),
        data: formData,
        contentType:false,
        processData:false,
        success: function (res) {
          app.showToast(" Product has been Saved successfully");
        }
      });
      return false;
    }  




    var length = 0;
    var thickness_flag = 0;
    var sizeArr = [];
    function editProduct(th) {
      var i = $(th).attr('value');
      $('.input-' + i).attr('type', 'text');
      $('.pro-tr-' + i + ' span').hide();
      $(th).html('<i class="fa fa-save"></i> Save')
        .attr('onclick', 'saveProduct(this)')
        .removeClass('btn-warning')
        .addClass('btn-info');
    }



    function deleteProduct() {
      if (confirm('Are you sure to delete this product')) {
        return true;
      }
      return false;
    }


    function saveProduct(th) {
      var i = $(th).attr('value');
      var data = {
        id: $('[name="_id[' + i + ']"]').val(),
        product: {
          product_image: $('[name="image[' + i + ']"]').val(),
          product_sku: $('[name="sku[' + i + ']"]').val(),
          product_name: $('[name="product[' + i + ']"]').val(),
          product_slug: $('[name="product_slug[' + i + ']"]').val(),

        },

      };
      $.ajax({
        type: 'POST',
        url: $(th).attr('action'),
        data: data,
        success: function (res) {

          if (res.success) {
            $('.input-' + i).attr('type', 'hidden');

            $(th).html('<i class="fa fa-pencil"></i> Edit')
              .attr('onclick', 'editProduct(this)')
              .removeClass('btn-info')
              .addClass('btn-warning');

            $('.input-' + i).each(function (j) {
              $('.pro-tr-' + i + ' span').eq(j).text($(this).val());

            });
            $('.pro-tr-' + i + ' span').show();
            app.showToast('Saved Successful', 'success');

          } else {
            app.showToast('This product sku already added', 'error');
          }

        }
      });
      return false;
    }

    function addProduct(th) {
      var url = $(th).attr('action');
      if (length == 0)
        length = parseInt($(th).attr('length'));

      formData = new FormData(th);
      app.post(url, formData, (result) => {

        for (inc in result) {
          var res = result[inc];
          if (res.id) {
            app.showToast('added Successful', 'success');
            var tr = '<tr class="pro-tr-' + length + ' " role="row">\
              <td tabindex="0" class="sorting_1">'+ (length + 1) + ' <input type="hidden" name="product[' + length + ']" value="' + res.id + '"></td>\
              <td> <span>'+ res.category + '</span> <input type="hidden" name="category[' + length + ']" class="input input-' + length + '" value="' + res.category + '"></td>\
              <td><span>'+ res.size + ' </span> <input type="hidden" name="size[' + length + ']" class="input input-' + length + '" value="' + res.size + '"></td>\
              <td> <span> '+ res.thickness + '</span> <input type="hidden" name="thickness[' + length + ']" class="input input-' + length + '" value="' + res.thickness + '"></td>\
              <td><span>'+ res.price + ' </span> <input type="hidden" name="price[' + length + ']" class="input input-' + length + '" value="' + res.price + '"></td>\
              <td> <a type="button" class="btn btn-warning btn-xs" value="'+ length + '" onclick="editProduct(this)" action="{{app.url}}admin/product-update"><i class="fa fa-pencil"></i> Edit</a></td>\
            </tr>';
            $('.product-variation').append(tr);
            length++;
          } else {
            app.showToast('This vriation already added', 'error');
          }
        }
      }, true);
      return false;
    }


    var count = 1;

    function plusVariations() {
      var size = $('.variation-repeat .input-size').first();
      var val_size = size.val();
      var html = $(".variation-repeat").first().clone();
      html.find('.input-product').attr({ name: "product[" + count + "][product_id]" });
      html.find('.input-category').attr({ name: "product[" + count + "][category]" });
      html.find('.input-size').attr({ name: "product[" + count + "][size]" }).val(val_size);
      html.find('.input-thickness').attr({ name: "product[" + count + "][thickness]" });
      html.find('.input-price').attr({ name: "product[" + count + "][price]" });
      html.find('.del-btn').attr({ onclick: "deleteVariations(this)" }).removeAttr('disabled').val(count);
      html.find('.row').addClass('remove-variation-' + count);

      $(".variation-repeat").last().after(html);
      count++;
    }


    function allVariations() {
      if (!thickness_flag) {


        var size = $('.variation-repeat .input-size').first();

        if (size.val() == 'all') {

          $('option', size).each(function (i) {
            var val_size = $(this).val();
            if (i) {
              allThickness(val_size);
              if (i == 1) {
                size.val(val_size);
              }
            }
          });
          thickness_flag = 1;
        } else {
          if (sizeArr.indexOf(size.val()) == -1) {
            sizeArr.push(size.val());
            allThickness(size.val());
          } else {
            app.showToast('this size already added');
          }

        }

      } else {
        app.showToast('All variation already added');
      }

    }

    var loopFlag = 0;
    function allThickness(val_size = null) {

      var thickness = $('.variation-repeat .input-thickness').first();
      $('option', thickness).each(function (i) {
        var val_thickness = $(this).val();
        if (!loopFlag) {
          if (i) {
            var html = $(".variation-repeat").first().clone();
            html.find('.input-product').attr({ name: "product[" + count + "][product_id]" });
            html.find('.input-category').attr({ name: "product[" + count + "][category]" });
            if (val_size == null)
              html.find('.input-size').attr({ name: "product[" + count + "][size]" });
            else
              html.find('.input-size').attr({ name: "product[" + count + "][size]" }).val(val_size);

            html.find('.input-thickness').attr({ name: "product[" + count + "][thickness]" }).val(val_thickness);
            html.find('.input-price').attr({ name: "product[" + count + "][price]" });
            html.find('.del-btn').attr({ onclick: "deleteVariations(this)" }).removeAttr('disabled').val(count);
            html.find('.row').addClass('remove-variation-' + count);

            $(".variation-repeat").last().after(html);
            count++;
          }
          loopFlag++;
        } else {
          var html = $(".variation-repeat").first().clone();
          html.find('.input-product').attr({ name: "product[" + count + "][product_id]" });
          html.find('.input-category').attr({ name: "product[" + count + "][category]" });
          if (val_size == null)
            html.find('.input-size').attr({ name: "product[" + count + "][size]" });
          else
            html.find('.input-size').attr({ name: "product[" + count + "][size]" }).val(val_size);

          html.find('.input-thickness').attr({ name: "product[" + count + "][thickness]" }).val(val_thickness);
          html.find('.input-price').attr({ name: "product[" + count + "][price]" });
          html.find('.del-btn').attr({ onclick: "deleteVariations(this)" }).removeAttr('disabled').val(count);
          html.find('.row').addClass('remove-variation-' + count);

          $(".variation-repeat").last().after(html);
          count++;
        }
      });
    }

  
  </script>

</body>

</html>